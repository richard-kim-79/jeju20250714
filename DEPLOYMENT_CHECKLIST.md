# 🚀 JeJu SNS 배포 전 점검 체크리스트

## 🔴 **HIGH PRIORITY (배포 차단 요소)**

### 1. 데이터베이스 설정 및 연결 ⚠️
- [ ] **PostgreSQL 데이터베이스 서버 구성**
  - 프로덕션 환경에 PostgreSQL 설치 및 설정
  - 데이터베이스 사용자 권한 설정
  - 방화벽 규칙 설정 (포트 5432)

- [ ] **DATABASE_URL 환경 변수 설정**
  ```bash
  DATABASE_URL=postgresql://username:password@host:5432/jeju_sns
  ```

- [ ] **데이터베이스 테이블 생성**
  ```bash
  psql -d jeju_sns -f database/add_indexes.sql
  ```

- [ ] **데이터베이스 연결 테스트**
  - 서버 시작 후 `/api/health` 엔드포인트 확인
  - 기본 CRUD 작업 테스트

### 2. 환경 변수 및 보안 설정 🔒
- [ ] **필수 환경 변수 설정**
  ```bash
  NODE_ENV=production
  PORT=3001
  DATABASE_URL=postgresql://...
  ```

- [ ] **Railway 배포 설정** (Railway 사용 시)
  - Railway 프로젝트 생성
  - PostgreSQL 플러그인 추가
  - 환경 변수 설정 (Railway 대시보드)
  - 도메인 설정

- [ ] **보안 설정**
  - bcrypt 솔트 라운드 확인 (최소 12)
  - CORS 설정 검토 (허용 도메인 업데이트)
  - 민감한 정보 하드코딩 제거

### 3. 빌드 및 정적 파일 생성 📦
- [ ] **CSS 빌드**
  ```bash
  npm run build
  ```

- [ ] **빌드 파일 검증**
  - `styles-optimized.css` 생성 확인 (21KB)
  - 모든 정적 파일 경로 확인
  - 서비스 워커 등록 확인

- [ ] **패키지 의존성 확인**
  - `package.json` 스크립트 동작 확인
  - `railway-server.js` 메인 파일 확인
  - 필수 의존성 설치 확인

## 🟡 **MEDIUM PRIORITY (성능 및 사용자 경험)**

### 4. 성능 최적화 검증 ⚡
- [ ] **번들 크기 확인**
  - CSS: 21KB 이하
  - JavaScript: 총 53KB 이하
  - HTML: 24KB 이하

- [ ] **로딩 성능 테스트**
  - 첫 페이지 로드 시간 측정
  - 리소스 프리로딩 동작 확인
  - 서비스 워커 캐싱 테스트
  - Compression 미들웨어 동작 확인

- [ ] **모바일 반응형 테스트**
  - 다양한 화면 크기에서 레이아웃 확인
  - 터치 인터페이스 동작 확인

### 5. 기능 테스트 🧪
- [ ] **핵심 기능 테스트**
  - 사용자 회원가입/로그인
  - 게시물 작성/수정/삭제
  - 댓글 작성/삭제
  - 좋아요 기능
  - 실시간 업데이트

- [ ] **인증 시스템 테스트**
  - user-id 헤더 기반 인증 동작 확인
  - 비밀번호 해싱 (bcrypt) 확인
  - 권한 검증 테스트

- [ ] **오프라인 기능 테스트**
  - 네트워크 연결 해제 시 오프라인 페이지 표시
  - 캐시된 콘텐츠 접근 가능성

### 6. 브라우저 호환성 🌐
- [ ] **크로스 브라우저 테스트**
  - Chrome (최신 2버전)
  - Firefox (최신 2버전)
  - Safari (최신 2버전)
  - Edge (최신 2버전)

- [ ] **JavaScript 기능 확인**
  - IntersectionObserver 폴리필 필요 여부
  - Service Worker 지원 확인

## 🟢 **LOW PRIORITY (개선 사항)**

### 7. 모니터링 및 로깅 📊
- [ ] **로그 설정**
  - 에러 로그 수집 설정
  - 성능 메트릭 수집
  - 사용자 행동 추적 (선택사항)

- [ ] **헬스 체크 엔드포인트**
  - `/api/health` 응답 확인
  - 데이터베이스 연결 상태 포함

### 8. SEO 및 메타데이터 🔍
- [ ] **메타 태그 설정**
  - Open Graph 태그
  - Twitter Card 태그
  - 적절한 title 및 description

- [ ] **구조화된 데이터**
  - JSON-LD 스키마 (선택사항)
  - 검색 엔진 최적화

### 9. 백업 및 복구 💾
- [ ] **데이터베이스 백업**
  - 자동 백업 스케줄 설정
  - 복구 절차 문서화

- [ ] **코드 백업**
  - Git 저장소 최신 상태 확인
  - 태그 생성 (버전 관리)

## 🚨 **배포 직전 최종 점검**

### 10. 프로덕션 환경 테스트 🎯
- [ ] **프로덕션 모드 실행**
  ```bash
  NODE_ENV=production npm start
  ```

- [ ] **메모리 및 CPU 사용량 모니터링**
  - 부하 테스트 실행
  - 메모리 누수 확인
  - 데이터베이스 커넥션 풀 모니터링

- [ ] **HTTPS 설정** (프로덕션 환경)
  - SSL 인증서 설치
  - HTTP → HTTPS 리다이렉션

### 11. 롤백 계획 📋
- [ ] **롤백 절차 준비**
  - 이전 버전 백업
  - 빠른 롤백 스크립트 준비

---

## 📝 **배포 순서**

1. **환경 설정** → 2. **데이터베이스 설정** → 3. **빌드** → 4. **테스트** → 5. **배포**

## ⚠️ **주의사항**

- **DATABASE_URL 미설정 시 서버 시작 불가**
- **CSS 빌드 없이 배포 시 스타일 깨짐**
- **서비스 워커 캐시로 인한 업데이트 지연 가능성**
- **Railway 배포 시 포트 충돌 방지 (5432 → 3001)**
- **CORS 설정에 프로덕션 도메인 추가 필요**

---

*마지막 업데이트: 2024년 12월*